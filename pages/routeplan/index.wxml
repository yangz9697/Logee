<view class="container">
  <!-- 站点选择区域 - 仅在未识别时显示 -->
  <view class="info-column" wx:if="{{!hasImageInfo}}">
    <view class="column-title">运输路线选择</view>
    
    <!-- 始发点选择 -->
    <view class="route-select">
      <text class="label">始发点</text>
      <view class="select-group">
        <view class="select-item {{selectedStartPoint === '京东南京转运中心' ? 'active' : ''}}" 
              bindtap="selectStartPoint" 
              data-point="京东南京转运中心">
          京东南京转运中心
        </view>
        <view class="select-item {{selectedStartPoint === '常州嘉民物流中心' ? 'active' : ''}}" 
              bindtap="selectStartPoint" 
              data-point="常州嘉民物流中心">
          常州嘉民物流中心
        </view>
      </view>
    </view>

    <!-- 目标站点选择 -->
    <view class="route-select">
      <text class="label">目标站点</text>
      <view class="select-group">
        <view class="select-item {{selectedEndPoint === '广州君建零部件产业园' ? 'active' : ''}}" 
              bindtap="selectEndPoint" 
              data-point="广州君建零部件产业园">
          广州君建零部件产业园
        </view>
        <view class="select-item {{selectedEndPoint === '成都经开区南五路与车城西一路交���口' ? 'active' : ''}}" 
              bindtap="selectEndPoint" 
              data-point="成都经开区南五路与车城西一路交叉口">
          成都经开区南五路与车城西一路交叉口
        </view>
      </view>
    </view>
  </view>

  <!-- 上传图片区域 - 仅在选择了站点且未识别时显示 -->
  <view class="upload-section" wx:if="{{!hasImageInfo && selectedStartPoint && selectedEndPoint}}">
    <button class="upload-btn" bindtap="chooseImage">上传/拍摄图片</button>
  </view>

  <!-- 提示选择站点 - 仅在未选择站点且未识别时显示 -->
  <view class="tip-text" wx:if="{{!hasImageInfo && (!selectedStartPoint || !selectedEndPoint)}}">
    请先选择始发点和目标站点
  </view>

  <!-- 图片预览 - 仅在未识别时显示 -->
  <image wx:if="{{tempImagePath && !hasImageInfo}}" class="preview-image" src="{{tempImagePath}}" mode="aspectFit"></image>

  <!-- 货物信息卡片 - 仅在识别成功后显示 -->
  <view class="info-container" wx:if="{{hasImageInfo}}">
    <!-- 货物信息 -->
    <view class="info-column cargo-info">
      <view class="column-title">货物信息</view>
      <view class="cargo-grid">
        <view class="cargo-item">
          <text class="label">货物名称</text>
          <text class="value">{{cargoName}}</text>
        </view>
        <view class="cargo-item">
          <text class="label">包装方式</text>
          <text class="value">{{packageType}}</text>
        </view>
        <view class="cargo-item">
          <text class="label">吨位/方位</text>
          <text class="value">{{weight}}吨/{{volume}}</text>
        </view>
        <view class="cargo-item">
          <text class="label">车型要求</text>
          <text class="value">{{truckType}}</text>
        </view>
        <view class="cargo-item full-width">
          <text class="label">备注</text>
          <text class="value">{{remark}}</text>
        </view>
      </view>
    </view>

    <!-- 提货信息 -->
    <view class="info-column" bindtap="showPickupRoute">
      <view class="column-title">
        提货信息
        <text class="price-tag">¥{{pickupPrice}}</text>
      </view>
      <view class="info-item">
        <text class="label">装货地址：</text>
        <text class="value long-text">{{loadingAddress}}</text>
      </view>
      <view class="info-item">
        <text class="label">始发站点：</text>
        <text class="value">{{startStation}}</text>
      </view>
      <view class="info-item">
        <text class="label">接货距离：</text>
        <text class="value">{{pickupDistance}}</text>
      </view>
    </view>

    <!-- 送货信息 -->
    <view class="info-column" bindtap="showDeliveryRoute">
      <view class="column-title">
        送货信息
        <text class="price-tag">¥{{deliveryPrice}}</text>
      </view>
      <view class="info-item">
        <text class="label">目的站点：</text>
        <text class="value">{{destinationStation}}</text>
      </view>
      <view class="info-item">
        <text class="label">卸货地址：</text>
        <text class="value long-text">{{unloadingAddress}}</text>
      </view>
      <view class="info-item">
        <text class="label">送货距离：</text>
        <text class="value">{{deliveryDistance}}</text>
      </view>
    </view>
  </view>

  <!-- 底部价格栏 - 仅在识别成功后显示 -->
  <view class="bottom-bar" wx:if="{{hasImageInfo}}">
    <view class="price-item">
      <text class="price-label">干线联运价格(元/吨)</text>
      <view class="stepper">
        <text class="stepper-btn" bindtap="decreasePrice">-</text>
        <text class="stepper-value">{{transitPrice}}</text>
        <text class="stepper-btn" bindtap="increasePrice">+</text>
      </view>
    </view>
    <view class="price-item bottom-actions">
      <view class="total-price-wrapper">
        <text class="price-label">总价</text>
        <text class="price-value">¥{{totalPrice}}</text>
      </view>
      <button class="reupload-btn" bindtap="chooseImage">重新上传</button>
    </view>
  </view>

  <!-- 悬浮上传按钮 -->
  <view class="float-upload" wx:if="{{hasImageInfo}}" bindtap="chooseImage">
    <image class="upload-icon" src="/assets/icons/camera.svg"></image>
  </view>
</view>